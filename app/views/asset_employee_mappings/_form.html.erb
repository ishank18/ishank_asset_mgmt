<script>
function populateAsset() {
	$.ajax({
    url: '<%= populate_asset_path %>', 
    dataType: 'script',
    type: 'get', 
    data: 'category='+$("#category").attr("value")
  });
}

function disableTo(currEle) {
	var returned = $("#asset_employee_mapping_date_returned");
	if(currEle.value == "Temporary") {
		returned.attr("disabled", false);
		returned.datepicker({"disabled":false});
	}
	else {
		returned.attr("disabled", true);
		returned.attr("value", "");
		returned.datepicker({"disabled":true});
	}	
}

</script>

<%= form_for(@asset_employee_mapping) do |f| %>

	
 <% if @asset_employee_mapping.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@asset_employee_mapping.errors.count, "error") %>
        prohibited this user from being saved:</h2>
      <ul>
      <% @asset_employee_mapping.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

<table id='assetTable'>

	<tr>
		<td><label>Product Category</label></td>
		<td>
			<% options = options_for_select([['-- Select --', ''], ['Laptop', 'Laptop'], ['Network Device', 'NetworkDevice'], ['Mobile Phone', 'MobilePhone']],@category) %>
			<%= select_tag(:category, options, :onChange => "populateAsset()") %>
		</td>
	</tr>

	<tr>
		<td><%= f.label :asset %></td>
		<td><%= f.select(:asset_id, []) %></td>
	</tr>
	<tr>
		<td><%= f.label :employee %></td>
		<td><%= f.select(:employee_id, @options_for_emp) %></td>
	</tr>
	<tr>
		<td><%= f.label :assignment_type %></td>
		<td>
			<label><%= f.radio_button :assignment_type, 'Permanent', :checked => true, :onclick => "disableTo(this)" %> Permanent</label>
			<label><%= f.radio_button :assignment_type, 'Temporary', :onclick => "disableTo(this)" %> Temporary</label>
		</td>
	</tr>
		
	<tr>
		<td><%= f.label :from %></td>
		<td><%= f.datepicker :date_issued %></td>
	</tr>
	
	<tr>
		<td><%= f.label :to %></td>
		<td><%= f.text_field :date_returned, :disabled => true %></td>
	</tr>
	
	<tr>
		<td><%= f.label :remark %></td>
		<td><%= f.text_area :remark, :rows => 3, :columns => 80  %></td>
	</tr>
	
	<tr>
		<td></td>
		<td><%= f.submit "Assign Asset" %></td>
	</tr>
	
</table>
<% end %>

