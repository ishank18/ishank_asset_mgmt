<%= form_for(@asset.becomes(Asset), :html => {:class => "form-horizontal"}) do |f| %>
	<% type = params[:asset][:type] if params[:asset] %>
	<%= render :partial => "shared/errors", :locals => { :obj => @asset } %>


	<div class="control-group">
		<label class="control-label" for="asset_type">Category *</label>
		<div class="controls">
			<%= show_category @asset, f, type %>
		</div>
	</div>

	<div class="control-group">
		<%= f.label :status, "Status *", :class => "control-label" %>
		<div class="controls">
			<%= show_status_field f %>
		</div>
	</div>
	
	<div class="control-group">
		<%= f.label :name, "Name *", :class => "control-label" %>
		<div class="controls">
			<%= f.text_field :name %>
		</div>
	</div>
		
	<div class="control-group">
		<%= f.label :cost, "Cost *", :class => "control-label" %>
		<div class="controls">
			<%= f.select(:currency_unit, options_for_select(CURRENCY, @asset.currency_unit), {}, :class => "currency") %>
			<%= f.text_field :cost, :class => "cost" %>
		</div>
	</div>
	
	<div class="control-group">
		<%= f.label :serial_number, "Serial number *", :class => "control-label" %>
		<div class="controls">
			<%= f.text_field :serial_number %>
		</div>
	</div>
	
	<div class="control-group">
		<%= f.label :vendor, "Vendor *", :class => "control-label" %>
		<div class="controls">
			<%= f.text_field :vendor %>
		</div>
	</div>
		
	<div class="control-group">
		<%= f.label :purchase_date, "Purchase date *", :class => "control-label" %>
		<div class="controls">
			<%= f.text_field :purchase_date, :value => @asset.purchase_date.try(:strftime, "%d/%m/%Y") %>
		</div>
	</div>
	
	<div id="specifics">
		<%= render :partial => type.tableize unless type.blank? %>
		<%= render :partial => params[:type].tableize unless params[:type].blank? %>
	</div>
	
	<div class="control-group">
		<%= f.label :description, "Description", :class => "control-label" %>
		<div class="controls">
			<%= f.text_area :description, :rows => 3 %>
		</div>
	</div>
	
	<div class="control-group">
		<%= f.label :additional_info, "Additional Info", :class => "control-label" %>
		<div class="controls">
			<%= f.text_area :additional_info, :rows => 3 %>
		</div>
	</div>

	<div class="control-group">
		<%= f.label :tags_field, "Tags", :class => "control-label" %>
		<div class="controls">
			<%= f.text_field :tags_field, :value => "" %>
			<span id='addTagButton' class="btn btn-mini" onclick='addTags()'>Add</span>
			<div id='tags'></div>
		</div>
	</div>
	
	<div class="control-group">
		<div class="controls">
			<%= f.submit (@asset.new_record? ? "Add Asset" : "Update Asset"), :class => "btn", :onclick => "fillTagContent()" %>
		</div>
	</div>
	
<% end %>

<script>
	$(function() {
		$("#asset_type").change(function() {
			$.ajax({
			  url: '<%= change_form_content_assets_path %>', 
			  dataType: 'script',
			  type: 'get', 
			  beforeSend: function() { showProgress() },
			  complete: function() { endProgress() },
			  data: 'type='+$("#asset_type").attr("value")
			})
		});
		$("#asset_purchase_date").datepicker({ maxDate: new Date, dateFormat: "dd/mm/yy" });
		$(".ShowTable tr:even").addClass("AlternateRow");
	})
</script>