<script>

function changeForm() {
	$.ajax({
    url: '<%= change_aem_form_assignments_path %>', 
    dataType: 'script',
    type: 'get',
    data: 'employee_id=<%= @assignment.employee_id %>&asset_id='+$("#assignment_asset_id").attr("value")
  });
}

$(function() {
	$("#assignment_comment_attributes__destroy").click( function() {
		 $('#assignment_comment_attributes_body').attr("readonly", this.checked)
	});
	$('#assignment_comment_attributes_body').attr("readonly", $("#assignment_comment_attributes__destroy").get(0).checked);
	$('#assignment_date_returned').datepicker({maxDate: new Date, dateFormat: "dd/mm/yy" });
	$('#assignment_submit').click(function() {
		if(!$('#assignment_comment_attributes_body').val()) {
			$("#assignment_comment_attributes__destroy").attr("checked", "true")
		}
	});
})

</script>

<legend>Return Asset</legend>

<%= form_for(@assignment, :html => {:class => "form-horizontal"}) do |f| %>

<%= render :partial => "shared/errors", :locals => { :obj => @assignment } %>


	<div class="control-group">
		<%= f.label :employee_id, "Employee Name", :class => "control-label" %>
		<div class="controls">
			<%= @assignment.employee.name %>
			<%= f.hidden_field :employee_id %>
		</div>
	</div>
	
	<div class="control-group">
		<%= f.label :asset_id, "Asset Name", :class => "control-label" %>
		<div class="controls">
			<%= asset_name f %>
		</div>
	</div>
	
	<div class="control-group">
		<%= f.label :issued_on, "Issued On", :class => "control-label" %>
		<div class="controls" id='issued_on'>
			<%= date_to_string @assignment.date_issued %>
		</div>
	</div>
	
	<div class="control-group">
		<%= f.label :assignment_type, "Assignment Type", :class => "control-label" %>
		<div class="controls" id='assignment_type'>
			<%= @assignment.expected_return_date? ? "Temporary" : "Permanent" %>
		</div>
	</div>
	
	<div class="control-group">
		<%= f.label :date_returned, "Return date *", :class => "control-label" %>
		<div class="controls">
			<%= f.text_field :date_returned, :value => "" %>
			<span id='scheduled_date'><%= " Original Return Date : <b>#{date_to_string @assignment.expected_return_date}</b>".html_safe if @assignment.expected_return_date? %></span>
		</div>
	</div>
	
	<div class="control-group">
		<%= f.fields_for :comment do |c| %>
		<%= c.label :body, "Description", :class => "control-label" %>
		<div class="controls">
			<%= c.text_area :body, :rows => 3, :columns => 80 %>
			<label class="checkbox inline">
				<%= c.check_box '_destroy' %> Remove 
			</label>
		</div>
		<% end %>
	</div>
	
	<div class="control-group">
		<div class="controls">
			<%= f.submit "Return Asset", :class => "btn" %>
		</div>
	</div>

</table>
<% end %>